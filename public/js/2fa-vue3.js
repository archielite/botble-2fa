(()=>{"use strict";var t={3572:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(1519),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"pre{background:#e0e0e0;border-radius:4px;font-size:20px;padding:10px}.lds-ring{display:inline-block;height:80px;position:relative;width:80px}.lds-ring div{animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border:4px solid #fff;border-color:var(--bs-secondary) transparent transparent transparent;border-radius:50%;box-sizing:border-box;display:block;height:64px;margin:8px;position:absolute;width:64px}.lds-ring div:first-child{animation-delay:-.45s}.lds-ring div:nth-child(2){animation-delay:-.3s}.lds-ring div:nth-child(3){animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]);const a=o},1519:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);n&&o[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},3379:(t,e,r)=>{var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),i=[];function c(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},n=[],o=0;o<t.length;o++){var a=t[o],l=e.base?a[0]+e.base:a[0],s=r[l]||0,u="".concat(l," ").concat(s);r[l]=s+1;var d=c(u),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(i[d].references++,i[d].updater(f)):i.push({identifier:u,updater:v(f,e),references:1}),n.push(u)}return n}function s(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,o);else{var a=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}function p(t,e,r){var n=r.css,o=r.media,a=r.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var h=null,m=0;function v(t,e){var r,n,o;if(e.singleton){var a=m++;r=h||(h=s(e)),n=f.bind(null,r,a,!1),o=f.bind(null,r,a,!0)}else r=s(e),n=p.bind(null,r,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var o=c(r[n]);i[o].references--}for(var a=l(t,e),s=0;s<r.length;s++){var u=c(r[s]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}r=a}}}},3744:(t,e)=>{e.Z=(t,e)=>{const r=t.__vccOpts||t;for(const[t,n]of e)r[t]=n;return r}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,exports:{}};return t[n](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{var t=r(3379),e=r.n(t),n=r(3572),o={insert:"head",singleton:!1};e()(n.Z,o);n.Z.locals;const a=Vue;var i={class:"modal modal-blur fade",ref:"twoFactorModal",tabindex:"-1","aria-hidden":"true"},c={class:"modal-dialog modal-dialog-centered"},l={class:"modal-content"},s={class:"modal-header"},u={class:"modal-title"},d={key:0},f={key:1},p={key:2},h=(0,a.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-hidden":"true"},null,-1),m={class:"modal-body"},v={key:0},y=(0,a.createElementVNode)("img",{src:"/vendor/core/plugins/2fa/images/shield.png",class:"w-100",alt:"shield"},null,-1),g={class:"mt-4 ms-0"},w={key:1,class:"mt-4 ms-0"},b={class:"my-4 text-center"},E=["innerHTML"],x={class:"text-center"},_=["textContent"],N={class:"form-group mt-3"},k={key:2},L=(0,a.createElementVNode)("div",{class:"text-center my-4"},[(0,a.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon text-success icon-lg",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[(0,a.createElementVNode)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,a.createElementVNode)("path",{d:"M5 12l5 5l10 -10"})])],-1),V={class:"d-flex flex-wrap gap-2"},S=["textContent"],C={key:3,class:"loading-spinner"},B={class:"modal-footer"},O={class:"d-grid gap-2 w-100"},j=["disabled","textContent"];function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function D(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */D=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new B(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function w(){}var b={};s(b,i,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(O([])));x&&x!==r&&n.call(x,i)&&(b=x);var _=w.prototype=y.prototype=Object.create(b);function N(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var l=d(t[o],t,a);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==T(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(u).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,r,n){var o=f;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=V(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?m:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function V(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,V(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(T(e)+" is not iterable")}return g.prototype=w,o(_,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=s(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},N(k.prototype),s(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},N(_),s(_,l,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function P(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function A(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){P(a,n,o,i,c,"next",t)}function c(t){P(a,n,o,i,c,"throw",t)}i(void 0)}))}}const F={props:{qrCodeUrl:{type:String,default:null},confirmUrl:{type:String,default:null},recoveryCodesUrl:{type:String,default:null},enableUrl:{type:String,default:null}},data:function(){return{modal:null,step:1,data:null,code:null,secret:null,loading:!1,troubleshooting:!1,recoveryCodes:[]}},mounted:function(){var t=this;this.modal=new bootstrap.Modal(this.$refs.twoFactorModal),$event.on("show-two-factor-setup-modal",(function(){t.show()}))},watch:{step:function(t){2===t&&this.getQrCode()}},methods:{show:function(){this.reset(),this.modal.show()},hide:function(){this.modal.hide(),setTimeout((function(){return window.location.reload()}),1e3)},reset:function(){this.step=1,this.data=null,this.secret=null,this.loading=!1,this.troubleshooting=!1,this.recoveryCodes=[],this.code=null},getQrCode:function(){var t=this;return A(D().mark((function e(){var r,n,o,a,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,$httpClient.make().get(t.qrCodeUrl);case 4:r=e.sent,n=r.data,o=n.error,a=n.message,i=n.data,o?Botble.showError(a):(t.data=i,t.secret=i.secret),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Botble.showError(e.t0.response.data.error);case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},confirm:function(){var t=this;return A(D().mark((function e(){var r,n,o,a,i,c,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,$httpClient.make().post(t.confirmUrl,{code:t.code,secret:t.secret});case 4:if(r=e.sent,n=r.data,o=n.error,a=n.message,!o){e.next=10;break}Botble.showError(a),e.next=13;break;case 10:return e.next=12,t.enableTwoFactor(t.secret);case 12:t.step++;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),i=e.t0.response.data,c=i.error,l=i.message,Botble.showError(c||l);case 19:t.loading=!1;case 20:case"end":return e.stop()}}),e,null,[[1,15]])})))()},getRecoveryCodes:function(){var t=this;return A(D().mark((function e(){var r,n,o,a,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,$httpClient.make().get(t.recoveryCodesUrl);case 4:r=e.sent,n=r.data,o=n.error,a=n.message,i=n.data,o?Botble.showError(a):t.recoveryCodes=i.recovery_codes,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Botble.showError(e.t0.response.data.error);case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},enableTwoFactor:function(t){var e=this;return A(D().mark((function r(){var n,o,a,i;return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,axios({method:"post",url:e.enableUrl,data:{secret:t}});case 3:if(n=r.sent,o=n.data,a=o.error,i=o.message,!a){r.next=8;break}return Botble.showError(i),r.abrupt("return");case 8:return r.next=10,e.getRecoveryCodes();case 10:Botble.showSuccess(i),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),Botble.showError(r.t0.response.data.error);case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))()}},computed:{isWelcome:function(){return 1===this.step},isQrCode:function(){return 2===this.step},isDone:function(){return 3===this.step}}};var G=r(3744);const M=(0,G.Z)(F,[["render",function(t,e,r,n,o,T){return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("h4",u,[T.isWelcome?((0,a.openBlock)(),(0,a.createElementBlock)("strong",d,(0,a.toDisplayString)(t.__("trans.setup.welcome_title")),1)):(0,a.createCommentVNode)("",!0),T.isQrCode?((0,a.openBlock)(),(0,a.createElementBlock)("strong",f,(0,a.toDisplayString)(t.__("trans.setup.qrcode_title")),1)):(0,a.createCommentVNode)("",!0),T.isDone?((0,a.openBlock)(),(0,a.createElementBlock)("strong",p,(0,a.toDisplayString)(t.__("trans.setup.done_title")),1)):(0,a.createCommentVNode)("",!0)]),h]),(0,a.createElementVNode)("div",m,[T.isWelcome?((0,a.openBlock)(),(0,a.createElementBlock)("div",v,[y,(0,a.createElementVNode)("ol",g,[(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("strong",null,(0,a.toDisplayString)(t.__("trans.setup.welcome_tutorial_step_1")),1),(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.setup.welcome_tutorial_step_1_description")),1)]),(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("strong",null,(0,a.toDisplayString)(t.__("trans.setup.welcome_tutorial_step_2")),1),(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.setup.welcome_tutorial_step_2_description")),1)])])])):T.isQrCode&&o.data?((0,a.openBlock)(),(0,a.createElementBlock)("ol",w,[(0,a.createElementVNode)("li",null,[o.troubleshooting?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.setup.enter_code_manually_tutorial")),1),(0,a.createElementVNode)("div",x,[(0,a.createElementVNode)("pre",{textContent:(0,a.toDisplayString)(o.data.secret)},null,8,_),(0,a.createElementVNode)("button",{type:"button",onClick:e[1]||(e[1]=function(t){return o.troubleshooting=!1}),class:"btn btn-link position-static"},(0,a.toDisplayString)(t.__("trans.setup.try_scan_qrcode_again")),1)])],64)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)((0,a.toDisplayString)(t.__("trans.setup.scan_qrcode_tutorial"))+" ",1),(0,a.createElementVNode)("div",b,[(0,a.createElementVNode)("div",{class:"d-block mb-2",innerHTML:o.data.svg},null,8,E),(0,a.createElementVNode)("button",{type:"button",onClick:e[0]||(e[0]=function(t){return o.troubleshooting=!0}),class:"btn btn-link position-static"},(0,a.toDisplayString)(t.__("trans.setup.cannot_scan_qrcode")),1)])],64))]),(0,a.createElementVNode)("li",null,[(0,a.createTextVNode)((0,a.toDisplayString)(t.__("trans.setup.enter_code_tutorial"))+" ",1),(0,a.createElementVNode)("div",N,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"one-time-code","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.code=t}),class:"form-control form-control-lg",placeholder:"XXXXXX"},null,512),[[a.vModelText,o.code]])])])])):T.isDone?((0,a.openBlock)(),(0,a.createElementBlock)("div",k,[L,(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.setup.done_message")),1),(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.setup.backup_codes_tutorial")),1),(0,a.createElementVNode)("div",V,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.recoveryCodes,(function(t,e){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e},[(0,a.createElementVNode)("code",{textContent:(0,a.toDisplayString)(t),class:"px-2 py-1"},null,8,S)])})),128))])])])):(0,a.createCommentVNode)("",!0),o.loading?((0,a.openBlock)(),(0,a.createElementBlock)("div",C)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",B,[(0,a.createElementVNode)("div",O,[(0,a.createElementVNode)("button",{class:"btn btn-primary",disabled:o.loading,type:"button",onClick:e[3]||(e[3]=function(t){return T.isQrCode?T.confirm():T.isDone?T.hide():o.step++}),textContent:(0,a.toDisplayString)(T.isQrCode?t.__("trans.confirm"):T.isDone?t.__("trans.done"):t.__("trans.next"))},null,8,j)])])])])],512)}]]);var q={class:"modal modal-blur fade",ref:"twoFactorRemoveModal",tabindex:"-1","aria-hidden":"true"},U={class:"modal-dialog modal-dialog-centered"},$={class:"modal-content"},I={class:"modal-header"},X={class:"modal-title"},R=(0,a.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-hidden":"true"},null,-1),Q=(0,a.createElementVNode)("div",{class:"modal-status bg-warning"},null,-1),Y={class:"modal-body"},Z={class:"form-group"},H=["disabled"],z={key:0,class:"loading-spinner"},W={class:"modal-footer"},J={class:"w-100 row"},K={class:"col"},tt=["textContent","disabled"],et={class:"col"},rt=["disabled","textContent"];function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ot=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new B(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function w(){}var b={};s(b,i,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(O([])));x&&x!==r&&n.call(x,i)&&(b=x);var _=w.prototype=y.prototype=Object.create(b);function N(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var l=d(t[o],t,a);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==nt(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(u).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,r,n){var o=f;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=V(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?m:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function V(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,V(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(nt(e)+" is not iterable")}return g.prototype=w,o(_,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=s(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},N(k.prototype),s(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},N(_),s(_,l,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function at(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}const it={props:{disableUrl:{type:String,required:!0}},data:function(){return{loading:!1,modal:null,code:""}},mounted:function(){var t=this;this.modal=new bootstrap.Modal(this.$refs.twoFactorRemoveModal),$event.on("show-two-factor-remove-modal",(function(){t.show()}))},methods:{remove:function(){var t,e=this;return(t=ot().mark((function t(){var r,n,o,a,i,c,l;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,$httpClient.make().delete(e.disableUrl,{code:e.code});case 4:r=t.sent,n=r.data,o=n.error,a=n.message,o?Botble.showError(a):(Botble.showSuccess(a),e.hide(),setTimeout((function(){return location.reload()}),1e3)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),i=t.t0.response.data,c=i.error,l=i.message,Botble.showError(c||l);case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){at(a,n,o,i,c,"next",t)}function c(t){at(a,n,o,i,c,"throw",t)}i(void 0)}))})()},show:function(){this.modal.show()},hide:function(){this.modal.hide()}}},ct=(0,G.Z)(it,[["render",function(t,e,r,n,o,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",q,[(0,a.createElementVNode)("div",U,[(0,a.createElementVNode)("div",$,[(0,a.createElementVNode)("div",I,[(0,a.createElementVNode)("h4",X,(0,a.toDisplayString)(t.__("trans.confirm_disable_title")),1),R]),Q,(0,a.createElementVNode)("div",Y,[(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.confirm_disable_description")),1),(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(t.__("trans.enter_code_to_disable")),1),(0,a.createElementVNode)("div",Z,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"one-time-code","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.code=t}),class:"form-control form-control-lg",placeholder:"XXXXXX",disabled:o.loading},null,8,H),[[a.vModelText,o.code]])]),o.loading?((0,a.openBlock)(),(0,a.createElementBlock)("div",z)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",W,[(0,a.createElementVNode)("div",J,[(0,a.createElementVNode)("div",K,[(0,a.createElementVNode)("button",{class:"btn btn-warning w-100",type:"button",onClick:e[1]||(e[1]=function(){return i.remove&&i.remove.apply(i,arguments)}),textContent:(0,a.toDisplayString)(t.__("trans.turn_off")),disabled:o.loading},null,8,tt)]),(0,a.createElementVNode)("div",et,[(0,a.createElementVNode)("button",{class:"btn w-100",type:"button",onClick:e[2]||(e[2]=function(){return i.hide&&i.hide.apply(i,arguments)}),disabled:o.loading,textContent:(0,a.toDisplayString)(t.__("trans.cancel"))},null,8,rt)])])])])])],512)}]]);var lt={class:"card-body"},st=(0,a.createElementVNode)("h2",{class:"card-title card-title-lg text-center mb-4"},"Authenticate Your Account",-1),ut=["textContent"],dt={class:"my-5"},ft={key:0,class:"row g-4"},pt=[(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("div",{class:"row g-2"},[(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("input",{type:"text",class:"form-control form-control-lg text-center py-3",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*","data-code-input":""})]),(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("input",{type:"text",class:"form-control form-control-lg text-center py-3",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*","data-code-input":""})]),(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("input",{type:"text",class:"form-control form-control-lg text-center py-3",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*","data-code-input":""})])])],-1),(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("div",{class:"row g-2"},[(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("input",{type:"text",class:"form-control form-control-lg text-center py-3",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*","data-code-input":""})]),(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("input",{type:"text",class:"form-control form-control-lg text-center py-3",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*","data-code-input":""})]),(0,a.createElementVNode)("div",{class:"col"},[(0,a.createElementVNode)("input",{type:"text",class:"form-control form-control-lg text-center py-3",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*","data-code-input":""})])])],-1)],ht={key:1},mt={for:"recovery_code",class:"form-label"},vt={class:"form-footer"},yt={class:"btn-list flex-nowrap"},gt=["textContent"],wt={type:"submit",class:"btn btn-primary w-100"};function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function Et(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Et=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new B(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function w(){}var b={};s(b,i,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(O([])));x&&x!==r&&n.call(x,i)&&(b=x);var _=w.prototype=y.prototype=Object.create(b);function N(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var l=d(t[o],t,a);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==bt(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(u).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,r,n){var o=f;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=V(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?m:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function V(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,V(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(bt(e)+" is not iterable")}return g.prototype=w,o(_,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=s(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},N(k.prototype),s(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},N(_),s(_,l,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xt(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}const _t={props:{url:{type:String,default:function(){return null},required:!0}},data:function(){return{recovery:null,recovery_code:"",loading:!1,code:null}},methods:{submit:function(){var t,e=this;return(t=Et().mark((function t(){var r;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,r=e.recovery?{recovery_code:e.recovery_code}:{code:e.code},$httpClient.make().post(e.url,r).then((function(t){var r=t.data;r.error||(window.location.href=r.data.next_url),e.loading=!1}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){xt(a,n,o,i,c,"next",t)}function c(t){xt(a,n,o,i,c,"throw",t)}i(void 0)}))})()},toggleRecovery:function(){this.recovery=!this.recovery,this.code=null,this.recovery_code=null}},mounted:function(){var t=this;document.querySelectorAll("[data-code-input]").forEach((function(e,r){e.addEventListener("input",(function(e){e.target.value.length===e.target.maxLength&&r<5&&document.querySelectorAll("[data-code-input]")[r+1].focus(),e.target.value.length===e.target.maxLength&&5===r&&(t.code=Array.from(document.querySelectorAll("[data-code-input]")).reduce((function(t,e){return t+e.value}),""))})),e.addEventListener("keydown",(function(t){0===t.target.value.length&&"Backspace"===t.key&&0===r&&document.querySelectorAll("[data-code-input]")[r].focus(),0===t.target.value.length&&"Backspace"===t.key&&r>0&&document.querySelectorAll("[data-code-input]")[r-1].focus(),"ArrowLeft"===t.key&&r>0&&document.querySelectorAll("[data-code-input]")[r-1].focus(),"ArrowRight"===t.key&&r<5&&document.querySelectorAll("[data-code-input]")[r+1].focus()}))})),document.querySelector("[data-code-input]").focus()}},Nt=(0,G.Z)(_t,[["render",function(t,e,r,n,o,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createElementVNode)("div",lt,[st,(0,a.createElementVNode)("p",{class:"my-4 text-center",textContent:(0,a.toDisplayString)(o.recovery?t.__("trans.challenge_recovery_code_tutorial"):t.__("trans.challenge_code_tutorial"))},null,8,ut),(0,a.createElementVNode)("form",{onSubmit:e[2]||(e[2]=(0,a.withModifiers)((function(){return i.submit&&i.submit.apply(i,arguments)}),["prevent"]))},[(0,a.createElementVNode)("div",dt,[o.recovery?((0,a.openBlock)(),(0,a.createElementBlock)("div",ht,[(0,a.createElementVNode)("label",mt,(0,a.toDisplayString)(t.__("trans.recovery_code")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",id:"recovery_code",class:"form-control form-control-lg","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.recovery_code=t}),autofocus:"",autocomplete:"one-time-code"},null,512),[[a.vModelText,o.recovery_code]])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",ft,pt))]),(0,a.createElementVNode)("div",vt,[(0,a.createElementVNode)("div",yt,[(0,a.createElementVNode)("button",{type:"button",class:"btn w-100",textContent:(0,a.toDisplayString)(o.recovery?t.__("trans.use_code"):t.__("trans.use_recovery_code")),onClick:e[1]||(e[1]=function(){return i.toggleRecovery&&i.toggleRecovery.apply(i,arguments)})},null,8,gt),(0,a.createElementVNode)("button",wt,(0,a.toDisplayString)(t.__("trans.login")),1)])])],32)])])}]]);"undefined"!=typeof vueApp&&(void 0===vueApp.eventBus&&(vueApp.eventBus={$on:function(){var t;return(t=window.$event).on.apply(t,arguments)},$emit:function(){var t;return(t=window.$event).emit.apply(t,arguments)}}),vueApp.booting((function(t){t.component("two-factor-setup-modal",M),t.component("two-factor-remove-modal",ct),t.component("two-factor-challenge",Nt)})))})()})();